{"ast":null,"code":"import _toConsumableArray from\"/Users/marinapisareva/Desktop/dev/mesto-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/marinapisareva/Desktop/dev/mesto-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import Header from'./Header';import Main from'./Main';import Footer from'./Footer';import PopupWithForm from'./PopupWithForn';import ImagePopup from'./ImagePopup';import{api}from'../utils/Api';import{CurrentUserContext}from'../contexts/CurrentUserContext';import EditProfilePopup from'./EditProfilePopup';import EditAvatarPopup from'./EditAvatarPopup';import AddPlacePopup from'./AddPlacePopup';function App(){var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),isEditProfilePopupOpen=_React$useState2[0],setIsEditProfilePopupOpen=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),isAddPlacePopupOpen=_React$useState4[0],setIsAddPlacePopupOpen=_React$useState4[1];var _React$useState5=React.useState(false),_React$useState6=_slicedToArray(_React$useState5,2),isEditAvatarPopupOpen=_React$useState6[0],setIsEditAvatarPopupOpen=_React$useState6[1];var _React$useState7=React.useState(false),_React$useState8=_slicedToArray(_React$useState7,2),selectedCard=_React$useState8[0],setSelectedCard=_React$useState8[1];var _React$useState9=React.useState(''),_React$useState10=_slicedToArray(_React$useState9,2),currentUser=_React$useState10[0],setCurrentUser=_React$useState10[1];var _React$useState11=React.useState([]),_React$useState12=_slicedToArray(_React$useState11,2),cards=_React$useState12[0],setCards=_React$useState12[1];React.useEffect(function(){api.getInitialCards().then(function(data){setCards(data);}).catch(function(err){console.log(err);});},[]);React.useEffect(function(){api.getUserInfo().then(function(user){setCurrentUser(user);}).catch(function(err){console.log(err);});},[]);function handleEditAvatarClick(){setIsEditAvatarPopupOpen(true);}function handleEditProfileClick(){setIsEditProfilePopupOpen(true);}function handleAddPlaceClick(){setIsAddPlacePopupOpen(true);}function closeAllPopups(){setIsEditAvatarPopupOpen(false);setIsEditProfilePopupOpen(false);setIsAddPlacePopupOpen(false);setSelectedCard(false);}function handleCardClick(card){setSelectedCard(card);}function handleUpdateUser(userInfo){api.editUserInfo(userInfo).then(function(user){setCurrentUser(user);closeAllPopups();}).catch(function(err){console.log(err);});}function handleUpdateAvatar(newAvatar){api.changeAvatar(newAvatar).then(function(avatar){setCurrentUser(avatar);closeAllPopups();}).catch(function(err){console.log(err);});}function handleCardLike(card){var isLiked=card.likes.some(function(i){return i._id===currentUser._id;});api.changeLikeCardStatus(card._id,!isLiked).then(function(newCard){var newCards=cards.map(function(c){return c._id===card._id?newCard:c;});setCards(newCards);});}function handleCardDelete(card){api.deleteCard(card._id).then(function(){var newCards=cards.filter(function(c){return c._id!==card._id;});setCards(newCards);}).catch(function(err){console.log(err);});}function handleAddPlaceSubmit(data){api.postUserCard(data).then(function(newPlace){setCards([newPlace].concat(_toConsumableArray(cards)));closeAllPopups();}).catch(function(err){console.log(err);});}return/*#__PURE__*/React.createElement(CurrentUserContext.Provider,{value:currentUser},/*#__PURE__*/React.createElement(\"div\",{className:\"page-container\"},/*#__PURE__*/React.createElement(Header,null),/*#__PURE__*/React.createElement(Main,{handleEditAvatar:handleEditAvatarClick,handleAddPlace:handleAddPlaceClick,handleEditProfile:handleEditProfileClick,onCardClick:handleCardClick,onCardLike:handleCardLike,onCardDelete:handleCardDelete,cards:cards}),/*#__PURE__*/React.createElement(EditProfilePopup,{isOpen:isEditProfilePopupOpen,onClose:closeAllPopups,onUpdateUser:handleUpdateUser}),/*#__PURE__*/React.createElement(EditAvatarPopup,{isOpen:isEditAvatarPopupOpen,onClose:closeAllPopups,onUpdateAvatar:handleUpdateAvatar}),/*#__PURE__*/React.createElement(AddPlacePopup,{isOpen:isAddPlacePopupOpen,onClose:closeAllPopups,onAddPlace:handleAddPlaceSubmit}),/*#__PURE__*/React.createElement(PopupWithForm,{name:\"confirm-deleting\",title:\"\\u0412\\u044B \\u0443\\u0432\\u0435\\u0440\\u0435\\u043D\\u044B?\",buttonText:\"\\u0414\\u0430\"}),/*#__PURE__*/React.createElement(ImagePopup,{card:selectedCard,onClose:closeAllPopups}),/*#__PURE__*/React.createElement(Footer,null)));}export default App;","map":{"version":3,"sources":["/Users/marinapisareva/Desktop/dev/mesto-react/src/components/App.js"],"names":["React","Header","Main","Footer","PopupWithForm","ImagePopup","api","CurrentUserContext","EditProfilePopup","EditAvatarPopup","AddPlacePopup","App","useState","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","selectedCard","setSelectedCard","currentUser","setCurrentUser","cards","setCards","useEffect","getInitialCards","then","data","catch","err","console","log","getUserInfo","user","handleEditAvatarClick","handleEditProfileClick","handleAddPlaceClick","closeAllPopups","handleCardClick","card","handleUpdateUser","userInfo","editUserInfo","handleUpdateAvatar","newAvatar","changeAvatar","avatar","handleCardLike","isLiked","likes","some","i","_id","changeLikeCardStatus","newCard","newCards","map","c","handleCardDelete","deleteCard","filter","handleAddPlaceSubmit","postUserCard","newPlace"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Header from './Header';\nimport Main from './Main';\nimport Footer from './Footer';\nimport PopupWithForm from './PopupWithForn';\nimport ImagePopup from './ImagePopup';\nimport { api } from '../utils/Api';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\nimport EditProfilePopup from './EditProfilePopup';\nimport EditAvatarPopup from './EditAvatarPopup';\nimport AddPlacePopup from './AddPlacePopup';\n\nfunction App() {\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(\n    false\n  );\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(\n    false\n  );\n  const [selectedCard, setSelectedCard] = React.useState(false);\n  const [currentUser, setCurrentUser] = React.useState('');\n  const [cards, setCards] = React.useState([]);\n\n  React.useEffect(() => {\n    api\n      .getInitialCards()\n      .then((data) => {\n        setCards(data);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }, []);\n\n  React.useEffect(() => {\n    api\n      .getUserInfo()\n      .then((user) => {\n        setCurrentUser(user);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }, []);\n\n  function handleEditAvatarClick() {\n    setIsEditAvatarPopupOpen(true);\n  }\n\n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpen(true);\n  }\n\n  function handleAddPlaceClick() {\n    setIsAddPlacePopupOpen(true);\n  }\n\n  function closeAllPopups() {\n    setIsEditAvatarPopupOpen(false);\n    setIsEditProfilePopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setSelectedCard(false);\n  }\n\n  function handleCardClick(card) {\n    setSelectedCard(card);\n  }\n\n  function handleUpdateUser(userInfo) {\n    api\n      .editUserInfo(userInfo)\n      .then((user) => {\n        setCurrentUser(user);\n        closeAllPopups();\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n\n  function handleUpdateAvatar(newAvatar) {\n    api\n      .changeAvatar(newAvatar)\n      .then((avatar) => {\n        setCurrentUser(avatar);\n        closeAllPopups();\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some((i) => i._id === currentUser._id);\n    api.changeLikeCardStatus(card._id, !isLiked).then((newCard) => {\n      const newCards = cards.map((c) => (c._id === card._id ? newCard : c));\n      setCards(newCards);\n    });\n  }\n\n  function handleCardDelete(card) {\n    api\n      .deleteCard(card._id)\n      .then(() => {\n        const newCards = cards.filter((c) => c._id !== card._id);\n        setCards(newCards);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n\n  function handleAddPlaceSubmit(data) {\n    api\n      .postUserCard(data)\n      .then((newPlace) => {\n        setCards([newPlace, ...cards]);\n        closeAllPopups();\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <div className='page-container'>\n        <Header />\n        <Main\n          handleEditAvatar={handleEditAvatarClick}\n          handleAddPlace={handleAddPlaceClick}\n          handleEditProfile={handleEditProfileClick}\n          onCardClick={handleCardClick}\n          onCardLike={handleCardLike}\n          onCardDelete={handleCardDelete}\n          cards={cards}\n        />\n        <EditProfilePopup\n          isOpen={isEditProfilePopupOpen}\n          onClose={closeAllPopups}\n          onUpdateUser={handleUpdateUser}\n        />\n\n        <EditAvatarPopup\n          isOpen={isEditAvatarPopupOpen}\n          onClose={closeAllPopups}\n          onUpdateAvatar={handleUpdateAvatar}\n        />\n\n        <AddPlacePopup\n          isOpen={isAddPlacePopupOpen}\n          onClose={closeAllPopups}\n          onAddPlace={handleAddPlaceSubmit}\n        />\n\n        <PopupWithForm\n          name='confirm-deleting'\n          title='Вы уверены?'\n          buttonText='Да'\n        />\n\n        <ImagePopup card={selectedCard} onClose={closeAllPopups} />\n\n        <Footer />\n      </div>\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}